<!DOCTYPE html>
<html>
	<head>
		<!--
		Customize this policy to fit your own app's needs. For more guidance, see:
			https://github.com/apache/cordova-plugin-whitelist/blob/master/README.md#content-security-policy
		Some notes:
			* gap: is required only on iOS (when using UIWebView) and is needed for JS->native communication
			* https://ssl.gstatic.com is required only on Android and is needed for TalkBack to function properly
			* Disables use of inline scripts in order to mitigate risk of XSS vulnerabilities. To change this:
				* Enable inline JS: add 'unsafe-inline' to default-src
		-->
		<meta http-equiv="Content-Security-Policy" content="default-src *; style-src 'self' 'unsafe-inline' *; script-src 'self' 'unsafe-inline' 'unsafe-eval' *">
		<!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *; img-src 'self' data: content:;"> -->
		<meta name="format-detection" content="telephone=no">
		<meta name="msapplication-tap-highlight" content="no">
		<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
		<link rel="stylesheet" type="text/css" href="css/index.css">
		<title>Teleport</title>
	</head>
	<body>
		<div class="app">
			<div class="header">
				<h1>Teleport</h1>
				<div id="deviceready" class="blink">
					<p class="event listening">Connecting to device</p>
					<p class="event received">Device is ready</p>
				</div>
			</div>

			<div class="localStream" ng-controller="LocalStreamController as localStream">
				<p>Username: <input ng-model="localStream.name"/></p>
				<video id="localVideo" muted="muted" autoplay="true"></video>
				<button ng-click="localStream.toggleCam()">{{ localStream.cameraIsOn ? 'Stop' : 'Start' }}</button>
				<div ng-show="localStream.cameraIsOn">		
					<p>Share this link:</p>
					<a>{{ localStream.link }}</a>
				</div>
			</div>

			<div class="remoteStreams" ng-controller="RemoteStreamsController as rtc">
				<h2>Remote Streams</h2>

				<div id="remoteVideosContainer"></div>

				<table>
					<thead>
						<tr>
							<th>Stream</th><th>1-way</th><th>2-way</th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="stream in rtc.remoteStreams" ng-class="{'selected' : stream.isPlaying}">
							<td><a>{{stream.name}}</a></td>
							<td ng-click="rtc.view(stream)"><a>View</a></td>
							<td ng-click="rtc.call(stream)"><a>Call</a></td>
						</tr>
					</tbody>
				</table>

				<button ng-click="rtc.loadData()">Refresh</button>
				<div class="remoteStreams"></div>
			</div>
		</div>

		<script type="text/javascript" src="https://projectrtc-tom.herokuapp.com/socket.io/socket.io.js"></script>
		<script type="text/javascript" src="bower_components/angular/angular.min.js"></script>
		<script type="text/javascript" src="js/adapter.js"></script>
		<script type="text/javascript" src="js/rtcClient.js"></script>
		<script type="text/javascript" src="js/projectrtc.js"></script>
		<!-- <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script> -->
		<script type="text/javascript" src="cordova.js"></script>
		<script type="text/javascript" src="js/app.js"></script>

	</body>
</html>